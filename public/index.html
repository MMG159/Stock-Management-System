<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
  <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' ; script-src 'self' ; style-src 'self' "> -->

  <!-- React.js / Babel CDN docs -->
  <script src="./src/reactDev.js" crossorigin></script>
  <script src="./src/reactDocDev.js" crossorigin></script>
  <script src='./src/babel.js'></script>
  <!-- <script src="https://unpkg.com/react@17/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin></script> -->


  <link rel="stylesheet" href="./src/bulmaMin.css">
  <link href="./styles.css" rel="stylesheet">
  <title>Login</title>

</head>

<body>
  <div id="LoginPage"></div>

  <script type="text/babel">

    const Navbar = () => {
      return (
        <nav>
          <ul>
            <li>home</li>
            <li>Trade</li>
            <li>Portfolio</li>
            <li>History</li>
          </ul>

          <img src="./src/logo.png" alt="" />
        </nav>
      )
    }

    const LoginView = () => {
      const [user, setUser] = React.useState([{
        "email":"",
        "password":""
      }])
      const [feedback, setFeedback] = React.useState({"status":0, "message":"some text"})

      function loginFormHandle(e){
        setUser((prevData)=>{
          return ({
            ...prevData,
            [e.target.name]: e.target.value
          })
        })
        console.log(user)
      }

      function loginUser(e){
        e.preventDefault();
        window.backend.login(user.email, user.password).then((res)=>{
          if(res.status != 200) setFeedback(res);
          
        })
      }
      
      return (
        <div className="LoginView">
          <h2 className="is-size-1">Welcome</h2>
          <form >
            <input className="input mt-5" onChange={loginFormHandle} name="email" value={user.email} type="text" placeholder="Email" />
            <input className="input mt-5" onChange={loginFormHandle} name="password"value={user.password} type="text" placeholder="Password" />
            <button className="button is-success mt-5" onClick={loginUser}>Login</button>
            
          </form>
          {feedback.status == 205?  
          <span className="is-size-6 has-text-danger mt-5">{feedback.message}</span>:null
          }

        </div>
      )
    }


    ReactDOM.render(
      <React.StrictMode>
        <Navbar />
        <LoginView />
      </React.StrictMode>
      , document.getElementById('LoginPage'));
  </script>



</body>

</html>